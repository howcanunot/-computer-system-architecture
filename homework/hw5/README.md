Работу выполнил: Савко Богдан Геннадьевич. БПИ203

Вариант 25
Задача о производстве булавок. В цехе по заточке булавок все
необходимые операции осуществляются тремя рабочими. Первый из них
берет булавку и проверяет ее на предмет кривизны. Если булавка не кривая,
то рабочий передает ее своему напарнику. Напарник осуществляет
собственно заточку и передает заточенную булавку третьему рабочему,
который осуществляет контроль качества операции. Требуется создать
многопоточное приложение, моделирующее работу цеха. При решении
использовать парадигму «производитель-потребитель»

## Описание модели производитель - потребитель
Одни потоки производят данные, другие их потребляют. В моем варианте производителями
являются рабочий #1 и рабочий #2, а потребителями рабочий #2 и рабочий #3. Т.е булавки идут
по конвейеру рабочий #1 -> рабочий #2 -> рабочий #3

Проблемы модели производители - потребители

- Т.к все рабочие являются потоками, следовательно, они делят одно адресное пространство.
Необходимо гарантировать корректную работу с конвейером(очередью) при добавлении и удалении оттуда
булавок. Конкретно в моей варианте такой проблемы нет, т.к у каждого потребителя один рабочий.
Такую проблему можно решить с помощью mutex, блокируя добавление или удаление булавки из очереди
- Потребитель пытается взять булавку из пустой очереди. Данную проблему можно решить
постоянно опрашивая очередь о наличии в ней каких-то элементов через какие-то промежутки времени. Такое решение не является
оптимальным, т.к возможно длительное простаивание потока. Для решения этой проблемы я завел conditional_variable, благодаря которой
поток потребитель спит, пока в очереди ничего нет и просыпается как только в очереди появляется элемент.

Источники:
https://en.wikipedia.org/wiki/Producer%E2%80%93consumer_problem

https://www.youtube.com/watch?v=rKGq9AlfPR4




## Описание программы
### Конвейер
Представляет собой синхронизованную очередь, которая блокирует потоки при добавлении и удалении элементов из очереди.
Здесь прописана вся логика добавление и удаление элемента из очереди
### Рабочие
Каждый работник является потоком. Работники связаны между собой конвейерами (первый - второй, второй - третий).
Т.е у первого и второго рабочего лежат одинаковые инстансы конвейера (аналогично у второго и третьего). Это позволяет им
иметь доступ к одним и тем же данным.

Первый рабочий - Evaluator

Второй рабочий - Grinder

Третий рабочий - Controller


### Логер
В логере описан синхронизированный вывод данных, объясняющих последовательность моделируемых действия.
В логер можно передать путь к файлу, чтобы все выводилось не в консоль, а в файл.

### Булавка
Содержит описание модели булавки, а так же способы генерации массива булавок (случайный или из файла).

## Описание формата ввода-вывода
### Ввод
Генерация данных осуществляется двумя способами - из файла или рандомно. Для ввода из файла требуется в аргументах
командной строки передать флаг -f после чего путь к файлу, например: ./hw5/code/cmake-build-debug/hw5 -f path/to/file

Для рандомной генерации нужно передать флаг -n и количество булавок, например: ./hw5/code/cmake-build-debug/hw5 -n 100

### Вывод
Вывод осуществляется двумя способами - в консоль или в файл. Для вывода логов в консоль требуется в последнем аргументе
командной строки передать путь к файлу, если этого не сделать, весь вывод будет поступать в консоль.
Например, ./hw5/code/cmake-build-debug/hw5 -n 100 path/to/file - теперь все логи будут находиться в файле 
